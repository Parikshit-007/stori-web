{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Banking API - Stori</title>
    <link rel="stylesheet" href="{% static 'api_docs/style.css' %}">
</head>
<body>
    <header>
        <h1>Business Banking API</h1>
        <p>MSME Credit Scoring</p>
    </header>

    <div class="container">
        <a href="{% url 'api_docs:index' %}" class="back-link">‚Üê Back to Documentation</a>

        <div class="section">
            <h2>Overview</h2>
            <p>Analyzes business current account transactions to assess cash flow health and operational stability.</p>

            <h3>Endpoint</h3>
            <div class="endpoint">
                <span class="method">POST</span>
                <code>https://mycfo.club/stori/api/msme/business-banking/analyze-json/</code>
            </div>

            <h3>Authentication</h3>
            <div class="code-block">
<pre>X-API-Key: your_api_key_here
Content-Type: application/json</pre>
            </div>
        </div>

        <div class="section">
            <h2>Request Body</h2>
            <h3>Sample Input JSON</h3>
            <div class="code-block">
<pre>{
  "business_name": "ABC Traders Pvt Ltd",
  "gstin": "29ABCDE1234F1Z5",
  "bank_name": "HDFC Bank",
  "account_type": "current",
  "bank_statement_data": {
    "account_number": "CURR1234",
    "statement_period": {
      "from": "2025-01-01",
      "to": "2025-12-31"
    },
    "transactions": [
      {
        "date": "2025-01-05",
        "description": "Customer Payment - Invoice 001",
        "amount": 125000,
        "type": "credit",
        "balance": 850000
      },
      {
        "date": "2025-01-07",
        "description": "Vendor Payment - ABC Suppliers",
        "amount": 75000,
        "type": "debit",
        "balance": 775000
      },
      {
        "date": "2025-01-10",
        "description": "Customer Payment - Invoice 002",
        "amount": 200000,
        "type": "credit",
        "balance": 975000
      },
      {
        "date": "2025-01-12",
        "description": "Salary Payment",
        "amount": 150000,
        "type": "debit",
        "balance": 825000
      }
    ]
  }
}</pre>
            </div>

            <h3>Request Parameters</h3>
            <table>
                <thead>
                    <tr>
                        <th>Field</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>business_name</td>
                        <td>string</td>
                        <td>Yes</td>
                        <td>Registered business name</td>
                    </tr>
                    <tr>
                        <td>gstin</td>
                        <td>string</td>
                        <td>Yes</td>
                        <td>Business GSTIN number</td>
                    </tr>
                    <tr>
                        <td>bank_statement_data</td>
                        <td>object</td>
                        <td>Yes</td>
                        <td>Business bank statement data</td>
                    </tr>
                    <tr>
                        <td>transactions</td>
                        <td>array</td>
                        <td>Yes</td>
                        <td>Array of business transactions (12 months recommended)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Response</h2>
            <h3>Sample Output JSON</h3>
            <div class="code-block">
<pre>{
  "success": true,
  "data": {
    "cashflow_health_score": 85,
    "business_risk_category": "low",
    
    "summary": {
      "average_bank_balance": 780000,
      "monthly_inflow": 3200000,
      "monthly_outflow": 2850000,
      "net_monthly_cashflow": 350000,
      "inflow_outflow_ratio": 1.12,
      "bounce_rate": 0,
      "working_capital_adequacy": "good"
    },
    
    "cashflow_trends": {
      "inflow_growth_mom": 5.2,
      "outflow_growth_mom": 3.8,
      "cashflow_volatility": 0.15,
      "seasonal_pattern": "moderate"
    },
    
    "operational_health": {
      "vendor_payment_regularity": 95,
      "customer_collection_efficiency": 88,
      "inventory_turnover_days": 45,
      "receivables_days": 30
    }
  }
}</pre>
            </div>

            <h3>Key Metrics</h3>
            <table>
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>cashflow_health_score</td>
                        <td>Overall cash flow health (0-100). Higher is better</td>
                    </tr>
                    <tr>
                        <td>inflow_outflow_ratio</td>
                        <td>Monthly inflow/outflow ratio (should be > 1.0)</td>
                    </tr>
                    <tr>
                        <td>average_bank_balance</td>
                        <td>Average working capital balance</td>
                    </tr>
                    <tr>
                        <td>bounce_rate</td>
                        <td>Percentage of bounced payments (should be 0)</td>
                    </tr>
                    <tr>
                        <td>cashflow_volatility</td>
                        <td>Consistency of cash flows (lower is better)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Usage Notes</h2>
            <ul>
                <li>Inflow/Outflow ratio > 1.0 indicates positive cash flow</li>
                <li>Consistent positive cash flow = business can service loan</li>
                <li>Store the returned data JSON for MSME final credit scoring</li>
                <li>High bounce rate is a red flag</li>
                <li>Provide 12 months data for accurate seasonal pattern detection</li>
            </ul>
        </div>
    </div>
</body>
</html>

