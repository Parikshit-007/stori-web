{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GST Analysis API - Stori</title>
    <link rel="stylesheet" href="{% static 'api_docs/style.css' %}">
</head>
<body>
    <header>
        <h1>GST Analysis API</h1>
        <p>MSME Credit Scoring</p>
    </header>

    <div class="container">
        <a href="{% url 'api_docs:index' %}" class="back-link">‚Üê Back to Documentation</a>

        <div class="section">
            <h2>Overview</h2>
            <p>Analyzes GST returns (GSTR-1, GSTR-2A, GSTR-2B, GSTR-3B) to assess business revenue, tax compliance, and vendor relationships.</p>

            <h3>Endpoint</h3>
            <div class="endpoint">
                <span class="method">POST</span>
                <code>https://mycfo.club/stori/api/msme/gst/uploads/</code>
            </div>
            <div class="endpoint">
                <span class="method">POST</span>
                <code>https://mycfo.club/stori/api/msme/gst/uploads/{id}/analyze/</code>
            </div>

            <h3>Authentication</h3>
            <div class="code-block">
<pre>X-API-Key: your_api_key_here
Content-Type: application/json</pre>
            </div>
        </div>

        <div class="section">
            <h2>Request Body</h2>
            <h3>Sample Input JSON</h3>
            <div class="code-block">
<pre>{
  "gstin": "29ABCDE1234F1Z5",
  "return_type": "gstr3b",
  "return_period": "12-2025",
  "filing_date": "2026-01-15",
  "gst_data": {
    "taxable_turnover": 8000000,
    "total_tax_liability": 1440000,
    "total_tax_paid": 1440000,
    "outstanding_tax": 0,
    "input_tax_credit": 120000,
    "sales_data": {
      "b2b_sales": 7200000,
      "b2c_sales": 800000
    },
    "vendors": [
      {
        "gstin": "27XXXXX1234X1Z5",
        "vendor_name": "ABC Suppliers",
        "total_amount": 500000,
        "verified": true
      },
      {
        "gstin": "27XXXXX5678Y1Z5",
        "vendor_name": "XYZ Traders",
        "total_amount": 300000,
        "verified": true
      }
    ]
  }
}</pre>
            </div>

            <h3>Request Parameters</h3>
            <table>
                <thead>
                    <tr>
                        <th>Field</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>gstin</td>
                        <td>string</td>
                        <td>Yes</td>
                        <td>15-digit GSTIN number</td>
                    </tr>
                    <tr>
                        <td>return_type</td>
                        <td>string</td>
                        <td>Yes</td>
                        <td>gstr1, gstr2a, gstr2b, or gstr3b</td>
                    </tr>
                    <tr>
                        <td>return_period</td>
                        <td>string</td>
                        <td>Yes</td>
                        <td>Month-Year (e.g., "12-2025")</td>
                    </tr>
                    <tr>
                        <td>gst_data</td>
                        <td>object</td>
                        <td>Yes</td>
                        <td>GST return data</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Response</h2>
            <h3>Sample Output JSON</h3>
            <div class="code-block">
<pre>{
  "success": true,
  "data": {
    "compliance_score": 88,
    "risk_level": "low",
    
    "filing_discipline": {
      "gst_filing_regularity": 87.5,
      "on_time_filings": 10,
      "late_filings": 2,
      "total_filings": 12
    },
    
    "revenue_analysis": {
      "total_revenue_fy": 96000000,
      "avg_monthly_revenue": 8000000,
      "mom_revenue_growth": 4.35,
      "qoq_revenue_growth": 8.2,
      "revenue_volatility": 0.12
    },
    
    "tax_analysis": {
      "tax_compliance_rate": 100,
      "outstanding_tax_amount": 0,
      "itc_claimed": 1440000,
      "effective_tax_rate": 18
    },
    
    "vendor_analysis": {
      "total_vendors": 15,
      "verified_vendors": 14,
      "vendor_verification_rate": 93.3,
      "vendor_concentration": 0.25
    }
  }
}</pre>
            </div>

            <h3>Key Metrics</h3>
            <table>
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>compliance_score</td>
                        <td>GST compliance score (0-100). Higher is better</td>
                    </tr>
                    <tr>
                        <td>gst_filing_regularity</td>
                        <td>Percentage of on-time GST filings</td>
                    </tr>
                    <tr>
                        <td>mom_revenue_growth</td>
                        <td>Month-on-Month revenue growth percentage</td>
                    </tr>
                    <tr>
                        <td>vendor_verification_rate</td>
                        <td>Percentage of verified vendors</td>
                    </tr>
                    <tr>
                        <td>outstanding_tax_amount</td>
                        <td>Pending GST payments (should be 0)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Usage Notes</h2>
            <ul>
                <li>Provide 12 months of GST returns for comprehensive analysis</li>
                <li>High compliance score indicates lower business risk</li>
                <li>Store the returned data JSON for MSME final credit scoring</li>
                <li>Outstanding tax is a red flag</li>
                <li>Consistent revenue growth is positive indicator</li>
            </ul>
        </div>
    </div>
</body>
</html>

