{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ITR Analysis API - Stori</title>
    <link rel="stylesheet" href="{% static 'api_docs/style.css' %}">
</head>
<body>
    <header>
        <h1>ITR Analysis API</h1>
        <p>Consumer Credit Scoring</p>
    </header>

    <div class="container">
        <a href="{% url 'api_docs:index' %}" class="back-link">‚Üê Back to Documentation</a>

        <div class="section">
            <h2>Overview</h2>
            <p>Validates income from Income Tax Returns and checks tax compliance to verify customer's declared income.</p>

            <h3>Endpoint</h3>
            <div class="endpoint">
                <span class="method">POST</span>
                <code>https://mycfo.club/stori/api/customer/itr/analyze-json/</code>
            </div>

            <h3>Authentication</h3>
            <p>Requires API Key in header. <a href="{% url 'api_docs:authentication' %}">See Authentication Guide</a></p>
            <div class="code-block">
<pre>X-API-Key: your_api_key_here
Content-Type: application/json</pre>
            </div>
        </div>

        <div class="section">
            <h2>Request Body</h2>
            <h3>Sample Input JSON</h3>
            <div class="code-block">
<pre>{
  "customer_name": "Rahul Sharma",
  "customer_pan": "ABCDE1234F",
  "assessment_year": "2024-25",
  "itr_data": {
    "itr_type": "ITR-1",
    "gross_total_income": 1440000,
    "taxable_income": 1290000,
    "tax_paid": 185000,
    "total_deductions": 150000,
    "income_sources": [
      {
        "source": "salary",
        "amount": 1440000
      }
    ],
    "filing_date": "2025-07-15",
    "due_date": "2025-07-31"
  }
}</pre>
            </div>

            <h3>Request Parameters</h3>
            <table>
                <thead>
                    <tr>
                        <th>Field</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>customer_name</td>
                        <td>string</td>
                        <td>Yes</td>
                        <td>Full name of the customer</td>
                    </tr>
                    <tr>
                        <td>customer_pan</td>
                        <td>string</td>
                        <td>Yes</td>
                        <td>PAN card number</td>
                    </tr>
                    <tr>
                        <td>assessment_year</td>
                        <td>string</td>
                        <td>Yes</td>
                        <td>Assessment year (e.g., "2024-25")</td>
                    </tr>
                    <tr>
                        <td>itr_data</td>
                        <td>object</td>
                        <td>Yes</td>
                        <td>ITR details</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Response</h2>
            <h3>Sample Output JSON</h3>
            <div class="code-block">
<pre>{
  "success": true,
  "message": "ITR analyzed successfully",
  "data": {
    "features": {
      "annual_income": 1440000,
      "monthly_income_itr": 120000,
      "tax_compliance_score": 0.98,
      "filing_on_time": true,
      "tax_paid_ratio": 0.128,
      "deduction_ratio": 0.104,
      "income_diversity": 1
    },
    "analysis_summary": {
      "itr_type": "ITR-1",
      "total_income": 1440000,
      "total_tax": 185000,
      "filing_status": "on_time"
    }
  }
}</pre>
            </div>

            <h3>Key Features</h3>
            <table>
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>annual_income</td>
                        <td>Total declared annual income</td>
                    </tr>
                    <tr>
                        <td>monthly_income_itr</td>
                        <td>Monthly income (annual/12)</td>
                    </tr>
                    <tr>
                        <td>tax_compliance_score</td>
                        <td>Filing discipline score (0-1)</td>
                    </tr>
                    <tr>
                        <td>filing_on_time</td>
                        <td>Whether ITR was filed on time</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Usage Notes</h2>
            <ul>
                <li>Compare monthly_income_itr with bank statement monthly_income for verification</li>
                <li>Store the returned features JSON for final credit scoring</li>
                <li>Significant mismatch between ITR and bank income may indicate risk</li>
            </ul>
        </div>
    </div>
</body>
</html>

