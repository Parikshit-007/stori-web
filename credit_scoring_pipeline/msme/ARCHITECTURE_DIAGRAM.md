"""
MSME Credit Scoring - Refactored Architecture Diagram
=====================================================

## Full Pipeline Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MSME CREDIT SCORING PIPELINE                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                TRAINING PHASE
                                ==============

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. DATA LAYER   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ synthetic_data_  â”‚  Generate â†’ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ generator.py     â”‚  10,000     â”‚  Synthetic Dataset  â”‚
â”‚                  â”‚  samples    â”‚  - 70+ features     â”‚
â”‚ â€¢ Segment-based  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚  - Realistic        â”‚
â”‚ â€¢ Industry risk  â”‚             â”‚  - Correlated       â”‚
â”‚ â€¢ Edge cases     â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
                                           â”‚
                                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ data_splitter.py â”‚  Split      â”‚ Train â”‚ Val â”‚ Test  â”‚
â”‚                  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  70%  â”‚ 15% â”‚ 15%   â”‚
â”‚ â€¢ Time-based OR  â”‚             â”‚                     â”‚
â”‚ â€¢ Stratified     â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
                                           â”‚
                                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. PREPROCESSING   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ preprocessor.py     â”‚  Transform  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚ Processed         â”‚
â”‚ â€¢ Imputation        â”‚             â”‚ Features          â”‚
â”‚ â€¢ Encoding          â”‚             â”‚ - No missing      â”‚
â”‚ â€¢ Scaling           â”‚             â”‚ - Encoded         â”‚
â”‚ â€¢ Feature eng.      â”‚             â”‚ - Scaled          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â”‚
                                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. HYPERPARAMETER   â”‚
â”‚    TUNING (Optuna)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ hyperparameter_     â”‚  Optimize   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ tuner.py            â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚ Best Params       â”‚
â”‚                     â”‚             â”‚ - num_leaves: 63  â”‚
â”‚ â€¢ 50-100 trials     â”‚             â”‚ - max_depth: 8    â”‚
â”‚ â€¢ TPE sampler       â”‚             â”‚ - learning_rate   â”‚
â”‚ â€¢ AUC maximization  â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
                                              â”‚
                                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. MODEL TRAINING   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ lightgbm_model.py   â”‚  Train      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚ Trained Model     â”‚
â”‚ â€¢ Binary class.     â”‚             â”‚ - 2000 trees      â”‚
â”‚ â€¢ Early stopping    â”‚             â”‚ - Calibrated      â”‚
â”‚ â€¢ SHAP explainer    â”‚             â”‚ - AUC: 0.85+      â”‚
â”‚ â€¢ Isotonic calib.   â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
                                              â”‚
                                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. EVALUATION       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ evaluator.py        â”‚  Evaluate   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚ Metrics           â”‚
â”‚ â€¢ AUC, Gini, KS     â”‚             â”‚ â€¢ AUC: 0.87       â”‚
â”‚ â€¢ Bucket analysis   â”‚             â”‚ â€¢ Gini: 0.74      â”‚
â”‚ â€¢ Calibration plot  â”‚             â”‚ â€¢ KS: 0.45        â”‚
â”‚ â€¢ SHAP summary      â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
                                              â”‚
                                              â†“
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ Model Artifacts     â”‚
                                    â”‚ â€¢ model.joblib      â”‚
                                    â”‚ â€¢ preprocessor      â”‚
                                    â”‚ â€¢ calibrator        â”‚
                                    â”‚ â€¢ SHAP explainer    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                                SCORING PHASE
                                =============

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ New Application     â”‚
â”‚ â€¢ business_age: 5y  â”‚
â”‚ â€¢ weekly_gtv: 3.5L  â”‚
â”‚ â€¢ monthly_gtv: 14L  â”‚
â”‚ â€¢ ... 70+ features  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PREPROCESSING       â”‚  Transform
â”‚ preprocessor.py     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
                                     â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Processed Features  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LIGHTGBM MODEL      â”‚  Predict
â”‚ lightgbm_model.py   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ predict_proba()   â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Default Probability â”‚
                            â”‚ e.g., 0.04 (4%)     â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CALIBRATION         â”‚  Calibrate
â”‚ calibration.py      â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Isotonic          â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Calibrated Prob     â”‚
                            â”‚ e.g., 0.045 (4.5%)  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SCORE CONVERSION    â”‚  Convert
â”‚ probability_to_     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ score.py            â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Credit Score        â”‚
                            â”‚ 670 (out of 900)    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RISK TIER           â”‚  Classify
â”‚ risk_tier.py        â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Prime: 750+       â”‚              â”‚
â”‚ â€¢ Near Prime: 650+  â”‚              â†“
â”‚ â€¢ Standard: 550+    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Subprime: 450+    â”‚     â”‚ Risk Tier           â”‚
â”‚ â€¢ High Risk: <450   â”‚     â”‚ "Near Prime"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â€¢ Eligible: Yes     â”‚
                            â”‚ â€¢ Multiplier: 0.30  â”‚
                            â”‚ â€¢ Rate: 13-16%      â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LOAN CALCULATOR     â”‚  Calculate
â”‚ loan_calculator.py  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Turnover method   â”‚              â”‚
â”‚ â€¢ MPBF method       â”‚              â†“
â”‚ â€¢ Cash flow method  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ Loan Limits         â”‚
                            â”‚ â€¢ Turnover: â‚¹50L    â”‚
                            â”‚ â€¢ Cash flow: â‚¹45L   â”‚
                            â”‚ â€¢ MPBF: â‚¹48L        â”‚
                            â”‚ â€¢ Recommended: â‚¹45L â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ FINAL DECISION      â”‚
                            â”‚ Score: 670          â”‚
                            â”‚ Tier: Near Prime    â”‚
                            â”‚ Eligible: Yes       â”‚
                            â”‚ Limit: â‚¹45 Lakhs    â”‚
                            â”‚ Rate: 14-15%        â”‚
                            â”‚ Tenure: 18 months   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


## Module Dependencies

```
main.py
  â”‚
  â”œâ”€â†’ data/
  â”‚    â”œâ”€â†’ synthetic_data_generator.py
  â”‚    â””â”€â†’ data_splitter.py
  â”‚
  â”œâ”€â†’ preprocessing/
  â”‚    â”œâ”€â†’ preprocessor.py
  â”‚    â”œâ”€â†’ feature_engineering.py
  â”‚    â”œâ”€â†’ scalers.py
  â”‚    â””â”€â†’ encoders.py
  â”‚
  â”œâ”€â†’ training/
  â”‚    â”œâ”€â†’ hyperparameter_tuner.py
  â”‚    â””â”€â†’ metrics.py
  â”‚
  â”œâ”€â†’ models/
  â”‚    â”œâ”€â†’ lightgbm_model.py
  â”‚    â”œâ”€â†’ calibration.py
  â”‚    â””â”€â†’ explainer.py
  â”‚
  â”œâ”€â†’ evaluation/
  â”‚    â”œâ”€â†’ evaluator.py
  â”‚    â””â”€â†’ visualization.py
  â”‚
  â”œâ”€â†’ scoring/
  â”‚    â”œâ”€â†’ probability_to_score.py
  â”‚    â”œâ”€â†’ risk_tier.py
  â”‚    â””â”€â†’ loan_calculator.py
  â”‚
  â”œâ”€â†’ rules/
  â”‚    â”œâ”€â†’ eligibility_checker.py
  â”‚    â”œâ”€â†’ overdraft_calculator.py
  â”‚    â””â”€â†’ pricing_calculator.py
  â”‚
  â””â”€â†’ config/
       â”œâ”€â†’ hyperparameters.py
       â”œâ”€â†’ constants.py
       â””â”€â†’ feature_config.py
```


## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA TRANSFORMATION                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Raw Features (70+)
    â”‚
    â”œâ”€â†’ business_age_years: 5.0
    â”œâ”€â†’ weekly_gtv: 350000
    â”œâ”€â†’ monthly_gtv: 1400000
    â”œâ”€â†’ bounced_cheques_count: 0
    â”œâ”€â†’ gst_filing_regularity: 0.95
    â””â”€â†’ ...
    â”‚
    â†“ [Preprocessing]
    â”‚
Processed Features (80+)
    â”‚
    â”œâ”€â†’ business_age_years: 5.0 (clipped)
    â”œâ”€â†’ weekly_gtv: 350000 (scaled)
    â”œâ”€â†’ legal_entity_type: 2 (encoded)
    â”œâ”€â†’ cash_coverage_ratio: 1.2 (derived)
    â”œâ”€â†’ overall_payment_discipline: 0.92 (derived)
    â””â”€â†’ ...
    â”‚
    â†“ [LightGBM]
    â”‚
Raw Probability: 0.045 (4.5% default risk)
    â”‚
    â†“ [Calibration]
    â”‚
Calibrated Probability: 0.048 (4.8% default risk)
    â”‚
    â†“ [Score Conversion]
    â”‚
Credit Score: 670
    â”‚
    â†“ [Risk Tier]
    â”‚
Risk Tier: Near Prime
    â”œâ”€â†’ Eligible: True
    â”œâ”€â†’ Turnover Multiplier: 0.30
    â”œâ”€â†’ Interest Rate: 13-16%
    â”œâ”€â†’ DSCR Required: 1.35
    â””â”€â†’ Max Tenure: 18 months
    â”‚
    â†“ [Loan Calculator]
    â”‚
Recommended Limit: â‚¹45,00,000
```


## Key Formulas

### 1. Default Probability â†’ Credit Score
```
Piecewise Linear Interpolation:
  0.00 â†’ 900
  0.02 â†’ 750
  0.05 â†’ 650
  0.12 â†’ 550
  0.25 â†’ 450
  1.00 â†’ 300
```

### 2. Overdraft Limit (Turnover Method)
```
Limit = Annual_Turnover Ã— Risk_Tier_Multiplier

Example:
  Annual Turnover = â‚¹1.68 Cr (â‚¹14L/month Ã— 12)
  Risk Tier = Near Prime â†’ Multiplier = 0.30
  Limit = â‚¹1.68 Cr Ã— 0.30 = â‚¹50.4 L
```

### 3. Overdraft Limit (MPBF Method)
```
MPBF = 0.75 Ã— (Current_Assets - Current_Liabilities) - Existing_Debt

Example:
  Current Assets = â‚¹80L
  Current Liabilities = â‚¹40L
  Existing Debt = â‚¹10L
  MPBF = 0.75 Ã— (â‚¹80L - â‚¹40L) - â‚¹10L = â‚¹20L
```

### 4. Overdraft Limit (Cash Flow Method)
```
Serviceable_EMI = Monthly_Surplus / DSCR_Required
Limit = Serviceable_EMI / 0.03

Example:
  Monthly Surplus = â‚¹2L
  DSCR Required = 1.35 (Near Prime)
  Serviceable EMI = â‚¹2L / 1.35 = â‚¹1.48L
  Limit = â‚¹1.48L / 0.03 = â‚¹49.3L
```

### 5. Final Recommendation
```
Recommended_Limit = MIN(Turnover_Limit, Cash_Flow_Limit, MPBF_Limit)

Example:
  Turnover: â‚¹50.4L
  Cash Flow: â‚¹49.3L
  MPBF: â‚¹48L
  Recommended = â‚¹48L (most conservative)
```


## Clean API Example

```python
# TRAINING
from msme.main import MSMEPipeline

pipeline = MSMEPipeline()
results = pipeline.run_training(n_samples=25000, tune_hyperparams=True)

# SCORING
pipeline.load_model()
result = pipeline.score_application(application_data)

print(result)
# {
#   'default_probability': 0.048,
#   'credit_score': 670,
#   'risk_tier': 'Near Prime',
#   'eligible': True,
#   'loan_limits': {
#     'turnover_method': 5040000,
#     'cash_flow_method': 4930000,
#     'mpbf_method': 4800000,
#     'recommended_limit': 4800000
#   },
#   'recommended_limit': 4800000,
#   'interest_rate_range': {'min': 13.0, 'max': 16.0}
# }
```

That's it! Clean, simple, production-ready! ğŸš€
"""

